(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7966],{7153:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(5861),a=n(7757),s=n.n(a),u=n(7294),i=n(5983),l=n(5893);function c(){var e=(0,u.useState)(null),t=e[0],n=e[1];(0,u.useEffect)((function(){n(i.Z.auth.session()),i.Z.auth.onAuthStateChange((function(e,t){n(t)})),console.log(t)}),[]);var a=(0,u.useState)(!0),c=a[0],o=a[1],d=(0,u.useState)(null),f=d[0],h=d[1],p=(0,u.useState)(null),v=p[0],m=p[1],b=(0,u.useState)(null),x=b[0],w=b[1];function _(){return(_=(0,r.Z)(s().mark((function e(){var t,n,r,a,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),t=i.Z.auth.user(),e.next=5,i.Z.from("profiles").select("username, website, avatar_url").eq("id",t.id).single();case 5:if(n=e.sent,r=n.data,a=n.error,u=n.status,!a||406===u){e.next=11;break}throw a;case 11:r&&(h(r.username),m(r.website),w(r.avatar_url)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert(e.t0.message);case 17:return e.prev=17,o(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})))).apply(this,arguments)}function g(){return(g=(0,r.Z)(s().mark((function e(t){var n,r,a,u,l,c,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.website,a=t.avatar_url,e.prev=1,o(!0),u=i.Z.auth.user(),l={id:u.id,username:n,website:r,avatar_url:a,updated_at:new Date},e.next=7,i.Z.from("profiles").upsert(l,{returning:"minimal"});case 7:if(c=e.sent,!(d=c.error)){e.next=11;break}throw d;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),alert(e.t0.message);case 16:return e.prev=16,o(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})))).apply(this,arguments)}return(0,u.useEffect)((function(){!function(){_.apply(this,arguments)}()}),[t]),(0,l.jsxs)("div",{className:"form-widget",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",children:"Email"}),(0,l.jsx)("input",{id:"email",type:"text",value:t&&t.user.email,disabled:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"username",children:"Name"}),(0,l.jsx)("input",{id:"username",type:"text",value:f||"",onChange:function(e){return h(e.target.value)}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"website",children:"Website"}),(0,l.jsx)("input",{id:"website",type:"website",value:v||"",onChange:function(e){return m(e.target.value)}})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{className:"block button primary",onClick:function(){return function(e){return g.apply(this,arguments)}({username:f,website:v,avatar_url:x})},disabled:c,children:c?"Loading ...":"Update"})}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{className:"block button",onClick:function(){return i.Z.auth.signOut()},children:"Sign Out"})})]})}},3621:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return n(7153)}])}},function(e){e.O(0,[9774,2888,179],(function(){return t=3621,e(e.s=t);var t}));var t=e.O();_N_E=t}]);